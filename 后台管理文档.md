# 后台管理服务目录说明

本文档说明项目中各个目录/包的用途和放置内容建议，便于团队统一约定。

## 项目根目录
- `pom.xml`：Maven 构建文件，定义依赖、插件和构建配置。
- `scripts/`：各类脚本（例如启动脚本、数据库迁移脚本、部署脚本）。
- `logs/`：运行时日志输出目录（可在 `logback-spring.xml` 中配置）。
- `后台管理文档.md`：本说明文件。

## Java 源码（`src/main/java/com/server/manage`）
以下按包（目录）说明

- `controller`
  - 作用：处理 HTTP 请求，编排服务调用，返回视图或 JSON。建议放置 REST/页面控制器，例如 `UserController`、`AuthController`、`HealthController`。

- `service`
  - 作用：业务逻辑实现层。Controller 调用 Service 来执行业务规则、事务管理和跨领域操作。
  - 建议：接口与实现分离（例如 `UserService` + `UserServiceImpl`），并在此处写单元测试。

- `repository`
  - 作用：数据访问层（例如 Spring Data JPA 仓库接口或 MyBatis Mapper）；负责与数据库交互。

- `model`
  - 作用：领域模型或实体类（例如 JPA 实体）。通常放置 `@Entity`、`@Table` 标注的类。
Markdown All in One
- `dto`
  - 作用：数据传输对象。用于 Controller/Service 之间或 API 的输入输出（避免直接暴露实体）。

- `config`
  - 作用：Spring 配置类、Bean 定义、跨域/安全/调度等配置项。
  - 建议：将 `@Configuration` 类、`@EnableScheduling`、定制的 `WebMvcConfigurer` 放在此处。

- `util`
  - 作用：工具类集合（静态方法或小型帮助类），例如 `DateUtils`、`IdGenerator`、`JsonUtils`。

- `common`
  - 作用：通用类和共享类型，例如统一响应封装 `ApiResponse`、常量定义、基础异常或基类。

- `security`
  - 作用：与认证/授权相关的实现，例如 `SecurityConfig`、JWT 工具、权限注解处理等。

- `exception`
  - 作用：全局异常处理、业务异常定义与处理器（例如 `GlobalExceptionHandler`）。

- `mapper`
  - 作用：对象映射（例如 MapStruct 或手写 DTO<->Entity 映射器）。

- `client`
  - 作用：外部服务客户端（例如使用 OpenFeign 的接口、RestTemplate/HttpClient 封装）。

- `scheduler`
  - 作用：定时任务相关类（例如 `@Scheduled` 的任务与调度配置）。


## 资源目录（`src/main/resources`）
- `application.properties` 或 `application.yml`：Spring Boot 配置。
- `config/`：放置额外配置文件（例如自定义的 properties 或 YAML）。
- `static/`：静态资源（前端静态文件、图片、JS、CSS）。
- `templates/`：Thymeleaf 或其他模板引擎视图模板。
- `i18n/`：国际化资源文件（例如 `messages.properties`、`messages_zh_CN.properties`）。
- `db/migration/`：数据库迁移脚本（Flyway 或 Liquibase 脚本）。

## 测试目录（`src/test/java/com/server/manage`）
- 对应源码包结构建立测试包。建议每个重要层（controller/service/repository）至少覆盖关键测试。

## 建议的初始文件
- `HealthController`（`controller`）：返回服务健康检查的简单端点 `/health`。
- `ApiResponse`（`common`）：统一接口返回体。
- `GlobalExceptionHandler`（`exception`）：统一转换异常到 `ApiResponse`。
- `application.yml`：示例配置（端口、日志路径、数据库连接占位）。
- `logback-spring.xml`：日志配置示例，将日志输出到 `logs/`。

## 开发约定（建议）
- 包名与目录一一对应，类命名遵循常规 Java 规范。
- DTO 与 Entity 分离，避免在 API 层暴露内部模型。
- Service 层应包含事务边界（`@Transactional`）。
- 将可复用逻辑放入 `util` 或 `common`，避免业务逻辑混入工具类。

---

如需，我可以基于本目录结构继续创建以下内容之一（请选择）：
- 创建示例类（`HealthController`、`ApiResponse`、`GlobalExceptionHandler`）并运行测试。
- 添加示例配置文件：`application.yml`、`logback-spring.xml`、`i18n/messages.properties`。
- 在 `scripts` 中添加 PowerShell 启动脚本 `run.ps1`。

告诉我下一步要做哪项，我会把对应的待办标为进行中并开始实现。
