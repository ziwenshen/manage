# 用户管理接口文档

## 概述

用户管理模块提供用户的增删改查、分页查询等功能。所有接口返回统一的 `ApiResponse<T>` 格式。

**基础路径**: `127.0.0.1:8080/api/users`

## 接口列表

### 1. 创建用户

**接口地址**: `POST /users/add`

**描述**: 创建新用户

**请求参数**:
```json
{
    "username": "string",     // 用户名，必填
    "password": "string",     // 密码，必填
    "enabled": true          // 是否启用，可选，默认为true
}
```

**响应示例**:
```json
{
    "success": true,
    "code": 200,
    "message": "success",
    "data": {
        "id": 1,
        "username": "admin",
        "enabled": true,
        "createdAt": "2025-09-14T10:30:00"
    }
}
```

---

### 2. 根据ID获取用户

**接口地址**: `GET /users/{id}`

**描述**: 根据用户ID获取用户详细信息

**路径参数**:
- `id`: 用户ID (Long类型)

**响应示例**:
```json
{
    "success": true,
    "code": 200,
    "message": "success",
    "data": {
        "id": 1,
        "username": "admin",
        "enabled": true,
        "createdAt": "2025-09-14T10:30:00"
    }
}
```

---

### 3. 根据用户名获取用户

**接口地址**: `GET /users/getUser/{username}`

**描述**: 根据用户名获取用户详细信息

**路径参数**:
- `username`: 用户名 (String类型)

**响应示例**:
```json
{
    "success": true,
    "code": 200,
    "message": "success",
    "data": {
        "id": 1,
        "username": "admin",
        "enabled": true,
        "createdAt": "2025-09-14T10:30:00"
    }
}
```

---

### 4. 更新用户

**接口地址**: `PUT /users/{id}`

**描述**: 更新指定用户的信息

**路径参数**:
- `id`: 用户ID (Long类型)

**请求参数**:
```json
{
    "password": "string",     // 新密码，可选
    "enabled": true          // 是否启用，可选
}
```

**响应示例**:
```json
{
    "success": true,
    "code": 200,
    "message": "success",
    "data": {
        "id": 1,
        "username": "admin",
        "enabled": false,
        "createdAt": "2025-09-14T10:30:00"
    }
}
```

---

### 5. 删除用户

**接口地址**: `DELETE /users/{id}`

**描述**: 删除指定用户

**路径参数**:
- `id`: 用户ID (Long类型)

**响应示例**:
```json
{
    "success": true,
    "code": 200,
    "message": "success",
    "data": "用户删除成功"
}
```

---

### 6. 分页查询用户列表

**接口地址**: `GET /users`

**描述**: 分页查询用户列表，支持按用户名和启用状态过滤

**查询参数**:
- `username`: 用户名模糊查询 (可选)
- `enabled`: 是否启用 (可选，true/false)
- `page`: 页码 (可选，默认为1)
- `size`: 每页大小 (可选，默认为10)

**请求示例**:
```
GET /users?username=admin&enabled=true&page=1&size=10
```

**响应示例**:
```json
{
    "success": true,
    "code": 200,
    "message": "success",
    "data": {
        "data": [
            {
                "id": 1,
                "username": "admin",
                "enabled": true,
                "createdAt": "2025-09-14T10:30:00"
            },
            {
                "id": 2,
                "username": "user1",
                "enabled": true,
                "createdAt": "2025-09-14T11:00:00"
            }
        ],
        "total": 25,
        "page": 1,
        "size": 10,
        "totalPages": 3
    }
}
```

---

### 7. 检查用户名是否存在

**接口地址**: `GET /users/exists/{username}`

**描述**: 检查指定用户名是否已存在

**路径参数**:
- `username`: 用户名 (String类型)

**响应示例**:
```json
{
    "success": true,
    "code": 200,
    "message": "success",
    "data": true
}
```

## 数据模型

### UserCreateRequest (创建用户请求)
```json
{
    "username": "string",     // 用户名，必填
    "password": "string",     // 密码，必填
    "enabled": "boolean"      // 是否启用，可选，默认true
}
```

### UserUpdateRequest (更新用户请求)
```json
{
    "password": "string",     // 新密码，可选
    "enabled": "boolean"      // 是否启用，可选
}
```

### UserQueryRequest (查询用户请求)
```json
{
    "username": "string",     // 用户名模糊查询，可选
    "enabled": "boolean",     // 是否启用，可选
    "page": "integer",        // 页码，可选，默认1
    "size": "integer"         // 每页大小，可选，默认10
}
```

### UserResponse (用户响应)
```json
{
    "id": "long",                    // 用户ID
    "username": "string",            // 用户名
    "enabled": "boolean",            // 是否启用
    "createdAt": "datetime"          // 创建时间
}
```

### ApiResponse (统一响应格式)
```json
{
    "success": "boolean",      // 操作是否成功
    "code": "integer",         // 状态码
    "message": "string",       // 响应消息
    "data": "object"          // 响应数据
}
```

### PageResult (分页结果)
```json
{
    "data": "array",          // 数据列表
    "total": "long",          // 总记录数
    "page": "integer",        // 当前页码
    "size": "integer",        // 每页大小
    "totalPages": "integer"   // 总页数
}
```

## 错误码说明

| 状态码 | 说明 |
|--------|------|
| 200 | 操作成功 |
| 400 | 请求参数错误 |
| 404 | 资源不存在 |
| 500 | 服务器内部错误 |

## 使用示例

### 创建用户
```bash
curl -X POST http://localhost:8080/users/add \
  -H "Content-Type: application/json" \
  -d '{
    "username": "testuser",
    "password": "123456",
    "enabled": true
  }'
```

### 查询用户列表
```bash
# 查询所有用户（分页）
curl "http://localhost:8080/users?page=1&size=10"

# 按用户名查询
curl "http://localhost:8080/users?username=admin&page=1&size=10"

# 查询启用的用户
curl "http://localhost:8080/users?enabled=true&page=1&size=10"
```

### 更新用户
```bash
curl -X PUT http://localhost:8080/users/1 \
  -H "Content-Type: application/json" \
  -d '{
    "enabled": false
  }'
```

### 删除用户
```bash
curl -X DELETE http://localhost:8080/users/1
```

## 注意事项

1. 所有接口都返回统一的 `ApiResponse` 格式
2. 分页查询支持多条件组合过滤
3. 密码在更新时为可选字段，不传则不更新密码
4. 用户名具有唯一性约束
5. 删除操作为物理删除，请谨慎操作